# ============================================
# ChatApp Microservices - Environment Variables
# ============================================
# Copy this file to .env and fill in the values
# DO NOT commit .env to version control
# ============================================

# General
NODE_ENV=production

RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672
REDIS_URL=redis://redis:6379
MONGO_URL=mongodb://chatapp_mongo_user:testpassword@mongo:27017/chatapp_chat_service?authSource=admin
USER_DB_URL=postgres://chatapp_user:testpassword@user-db:5432/chatapp_user_service
AUTH_DB_URL=mysql://chatapp_auth_user:testpassword@auth-db:3306/chatapp_auth_service

# ============================================
# Security Secrets (REQUIRED - Generate secure values!)
# ============================================
# Generate with: openssl rand -base64 48
JWT_SECRET=
JWT_REFRESH_SECRET=
INTERNAL_API_TOKEN=

# JWT Token Expiration
JWT_EXPIRES_IN=1d
JWT_REFRESH_EXPIRES_IN=30d

# ============================================
# Service Ports (External - for host access)
# ============================================
GATEWAY_PORT=4000
AUTH_SERVICE_PORT=4003
USER_SERVICE_PORT=4001
CHAT_SERVICE_PORT=4002

# ============================================
# RabbitMQ Configuration
# ============================================
RABBITMQ_USER=chatapp-rabbitmq
RABBITMQ_PASSWORD=
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# ============================================
# Redis Configuration
# ============================================
REDIS_PORT=6379

# ============================================
# MongoDB Configuration (Chat Service)
# ============================================
MONGO_INITDB_ROOT_USERNAME=chatapp_mongo_user
MONGO_INITDB_ROOT_PASSWORD=testpassword

# ============================================
# PostgreSQL Configuration (User Service)
# ============================================
USER_DB_NAME=chatapp_user_service
USER_DB_USER=chatapp_user
USER_DB_PASSWORD=testpassword

# ============================================
# MySQL Configuration (Auth Service)
# ============================================
AUTH_DB_NAME=chatapp_auth_service
AUTH_DB_USER=chatapp_auth_user
AUTH_DB_PASSWORD=testpassword
AUTH_DB_ROOT_PASSWORD=''

# ============================================
# Dokploy Deployment Notes
# ============================================
# 1. In Dokploy, create a new "Compose" project
# 2. Point to your repository containing this docker-compose.yml
# 3. Set these environment variables in Dokploy's UI
# 4. Expose the gateway-service port (4000) via Dokploy's domain settings
#
# For production, ensure you:
# - Generate strong random secrets for JWT_SECRET, JWT_REFRESH_SECRET, INTERNAL_API_TOKEN
# - Use strong passwords for all database credentials
# - Configure proper SSL/TLS via Dokploy's proxy settings
# ============================================
